概要
---

+ 場所
 + 1F
+ タイムテーブル
 + 準備(5分)
 + グループディスカッション(35分)
 + 次の回の範囲決め(5分)
+ ファシリテーター
 + @soe-j
+ レポーター
 + @soe-j

範囲
---

+ 8-4 デプロイする (p302-313)﻿

グループ分け(敬称略)
---

+ A班 @n-imai @aisaka @ssusan @TMogi @soe-j

共有内容
---

### A班
#### ツール利用したい気持ち
+ capistrano業務で使えたらいいなと思って参加しました。

#### unicorn設定について
+ ここに書いてあるunicorn.rbは最低限以上書いてある
+ before_forkの前までが必須設定
+ unicornのworkerはCPU数に合わせた方がいいらしい
+ preload_appはダウンタイムを無くすため設定
  + しかしbefore_forkの部分も書く必要がある(ほぼおまじない)
  + @n-imai さんのところでunicornプロセス大量発生したのはこれ書いてなかったせい？

#### unicornプロセスの構成
+ masterと複数のworkerがいて、masterがworkerを管理して、workerがそれぞれリクエストを受ける

~~~
● <- master
○○○○ <-workerたち
~~~

#### capistrano
+ デプロイツール
+ capistranoが使うディレクトリ構成
  + ex. /service/app_name/ 配下に current releases shared ができる
  + currentはreleasesの最新のシンボリックリンク
  + releasesは今までのモジュールたち
  + sharedはログをおいたり、pidファイルおいたりするのに使う
+ keep_releasesでとっておくモジュールの数を設定
+ p.312にずらーって書いてあるのは全部フックとして使える
+ p.308のリスト8.27では、ユーザー名@ホスト名で指定されているが、autoscalingとか使ってるとIP固定じゃない
  + レンジで指定できるはずなので、それを利用して

#### ツール利用に際して
+ version違うと書き方が大きく違ったりする(ex. python, rspec, capistrano exc..)
  versionの違いを追うのが辛い世の中
+ ブルーグリーンデプロイメント
  + 一度マシンを立ち上げたら、マシンの状態は変更しないという考え。
  + 立ち上げたマシンに何度もデプロイするのはやめよっていう考え。
+ マシン立ち上げ時にクローンしてアプリ起動しちゃうならcap使わないても良いから、そこまでコストかけていれるものでもないかと
+ ツールが一杯ありすぎて、このツールは何をするものなのかを理解しないとすぐに訳分からなくなりそう。

次回
---
+ 第32回 5月12日
+ 内容
  + 8-5 New Relicによる監視 p.313-328
  + 8-6 serverspecとインフラのテスト p.329-330
  + 8-7 終わりに p.330
+ 担当
  + ファシリ：@n-imai さん
  + レポータ：@TMogi さん
