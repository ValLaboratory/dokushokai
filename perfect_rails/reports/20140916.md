概要
---

* 場所
    * 1F
* タイムテーブル
    * グループディスカッション(30分)
    * 全体共有(20分)
    * 次回について(5分)
* ファシリテーター
    * 茂木
* レポーター
    * 鈴木(省)

範囲
---
* 2-1, 2-2(p44からp63まで)

グループ分け
---
※敬称略
* A 田辺 大澤 石橋(亮) 添田
* B 相坂 中野 茂木
* C 河津 古谷 福本 鈴木(省)

共有内容
---

### A班

* Modelのところにビジネスロジックを実装していく
* あるモデルと他のモデルにまたがる処理や、テーブルのないクラスファイルを`app/model/concerns`に入れる
* `db:create`忘れやすい
* `rails g migration AddPublisherIdToBooks publisher:references`のマイグレーションファイル名は規約なのか
    * 次の部分は必須
        * `Add` : カラムを追加する
        * `ToBooks` : Booksテーブルに
    * http://www.happytrap.jp/blogs/2010/01/26/1909/
* SQLが発行されるのはデータが必要になった時点
* モデルのバリデーション設定は、テーブルのリレーションが作られるわけではない
    * マイグレーションファイルにも設定した方がいい
* `enum`設定するとバリデーションが配すので、打ち間違いとかでも検知してくれる

### B班

* `where`メソッドの妙なベタ書き感
* 頻繁に使う検索条件をスコープにしておくと便利
* `has_many`は外部キー制約ではない
    * 外部キーがデフォルトで設定できないの面倒
* `validation`は弱い制約
    * 方法によっては無視できてしまうらしい
    * `generate model`のときにちゃんと制約付けたほうがいい
* 既存DBの場合にどうすべきか書いてない
    * もぎー半ギレ
* Rails4.1から`enum`使えるすごい
* 索引にトランザクション無し(迫真)
* modelを扱うのにDBの知識は必須
* RailsはSQLよりも動詞がしっかりメソッドになってて読みやすい
    * カラム`nil`の時の選択に難がありそうだけど、Railsではよしなにやってくれる？
* `not null`制約は`generate model`でできない？
    * 生成されたマイグレーションファイルをどの程度編集していいのか悩ましい
    * `not null`や`foreign key`とか付けるのは直修正でもいい？

### C班

* スコープやバリデーション便利
    * フォーム上(View)でいろいろ考えなくて良くて楽
* バリデーションの`!`付きメソッドは失敗時に例外を吐く
    * Rubyでは普通`!`付きは破壊的メソッドを指すので、命名規則的にもやっとする
    * 使い分けがよくわからない
* 細かいところで記述ルールに罠が多い
    * 単数形と複数形
        * 民族的、言語的につらい
    * シンボルにする箇所
* 間違えた時のUNDOが気軽にできないのがつらい
    * 脳がフリーズする
* コマンドでフィールド定義するのは大変
    * 30カラムとかあったら間違いなくミスる
    * 1カラムだけ`generate model`で作り、残りはマイグレーションファイルとモデルファイルを直接編集すればいいのでは
    * テスト部分も外枠だけ作られるし
* `AddPublisherIdToBooks`はそういう命名ルール
* `rails console`
    * 使えれば便利
    * ファイル修正したら起動し直して環境を読み込まないと反映されないので注意
* `enum`は使いたければ使うでいい？
* 中間テーブルを作る時など、いろいろ操作する必要がある印象
    * 慣れないと大変
    * DBわからないとつらい
* 「ビジネスロジック」という言葉
    * 「ビジネス」って？

次回
---

* 2-3(~p.74)までを予習すること
* ファシリテーター：田辺
* レポーター：福井
